<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Root Finder - Phase 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header with Back Button -->
        <header class="flex items-center justify-between mb-8">
            <a href="index.html" class="flex items-center gap-2 text-slate-400 hover:text-white transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                Back to Menu
            </a>
            <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-500">
                Root Finder Pro
            </h1>
            <div class="w-24"></div> <!-- Spacer for centering -->
        </header>

        <div class="grid lg:grid-cols-12 gap-6">
            
            <!-- LEFT COLUMN: Config (4 cols) -->
            <div class="lg:col-span-4 space-y-6">
                
                <!-- 1. Function Definition -->
                <div class="glass-panel rounded-2xl p-6">
                    <h2 class="text-lg font-semibold text-purple-400 mb-4">1. Define Function</h2>
                    
                    <div class="mb-4">
                        <label class="block text-xs text-slate-400 mb-1 uppercase tracking-wider">Equation f(x) = 0</label>
                        <input type="text" id="equationInput" placeholder="x^3 - 2*x - 5" 
                               class="w-full bg-slate-800 border border-slate-600 rounded px-4 py-3 text-white focus:border-purple-400 focus:outline-none font-mono text-lg shadow-inner">
                    </div>
                    
                    <!-- Fixed Point g(x) input (Hidden by default) -->
                    <div id="gEquationContainer" class="mb-4 hidden fade-in">
                        <label class="block text-xs text-slate-400 mb-1 uppercase tracking-wider">g(x) where x = g(x)</label>
                        <input type="text" id="gEquationInput" placeholder="(2*x + 5)^(1/3)" 
                               class="w-full bg-slate-800 border border-slate-600 rounded px-4 py-3 text-white focus:border-pink-400 focus:outline-none font-mono text-lg shadow-inner">
                    </div>

                    <button onclick="plotFunction()" class="w-full border border-slate-600 hover:bg-slate-700/50 text-slate-300 py-2 rounded transition flex items-center justify-center gap-2 text-sm font-medium">
                        <span class="text-xl">ðŸ“ˆ</span> Plot Graph
                    </button>
                </div>

                <!-- 2. Method Config -->
                <div class="glass-panel rounded-2xl p-6">
                    <h2 class="text-lg font-semibold text-purple-400 mb-4">2. Configure Method</h2>
                    
                    <div class="mb-5">
                        <label class="block text-xs text-slate-400 mb-1 uppercase tracking-wider">Algorithm</label>
                        <select id="methodSelect" onchange="updateUI()" 
                                class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white focus:border-purple-400 focus:outline-none appearance-none">
                            <option value="Bisection">Bisection</option>
                            <option value="False-Position">False-Position</option>
                            <option value="Fixed Point">Fixed Point</option>
                            <option value="Newton-Raphson">Original Newton-Raphson</option>
                            <option value="Modified Newton">Modified Newton-Raphson</option>
                            <option value="Secant">Secant Method</option>
                        </select>
                    </div>

                    <!-- Dynamic Inputs -->
                    <div id="bracketingParams" class="grid grid-cols-2 gap-4 mb-4 fade-in">
                        <div>
                            <label class="block text-xs text-slate-500 mb-1">Lower ($X_l$)</label>
                            <input type="number" id="xlInput" placeholder="-10" class="input-field">
                        </div>
                        <div>
                            <label class="block text-xs text-slate-500 mb-1">Upper ($X_u$)</label>
                            <input type="number" id="xuInput" placeholder="10" class="input-field">
                        </div>
                    </div>

                    <div id="initialGuessParams" class="hidden mb-4 fade-in">
                        <label class="block text-xs text-slate-500 mb-1">Initial Guess ($X_0$)</label>
                        <input type="number" id="x0Input" placeholder="0" class="input-field w-full">
                    </div>

                    <div id="secantParams" class="hidden grid grid-cols-2 gap-4 mb-4 fade-in">
                        <div>
                            <label class="block text-xs text-slate-500 mb-1">Guess $X_{i-1}$</label>
                            <input type="number" id="x_minus_1" placeholder="0" class="input-field">
                        </div>
                        <div>
                            <label class="block text-xs text-slate-500 mb-1">Guess $X_i$</label>
                            <input type="number" id="x_i" placeholder="1" class="input-field">
                        </div>
                    </div>

                    <!-- Global Settings -->
                    <div class="pt-4 border-t border-slate-700/50 space-y-3">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs text-slate-500 uppercase">Tolerance</label>
                                <input type="number" id="epsilonInput" value="0.00001" step="0.00001" class="input-field text-sm">
                            </div>
                            <div>
                                <label class="block text-xs text-slate-500 uppercase">Max Iter</label>
                                <input type="number" id="maxIterInput" value="50" class="input-field text-sm">
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs text-slate-500 uppercase">Precision (Sig Figs)</label>
                            <input type="number" id="sigFigsInput" value="5" min="1" max="15" class="input-field text-sm w-full">
                        </div>
                    </div>
                </div>

                <button onclick="solveRoot()" class="btn-primary w-full text-white font-bold py-4 rounded-xl shadow-lg text-lg tracking-wide hover:shadow-purple-500/20">
                    FIND ROOT
                </button>
            </div>

            <!-- RIGHT COLUMN: Visualization (8 cols) -->
            <div class="lg:col-span-8 space-y-6">
                
                <!-- Graph -->
                <div class="glass-panel rounded-2xl p-1 min-h-[450px] relative flex flex-col">
                    <div id="plotDiv" class="w-full flex-1 rounded-xl overflow-hidden"></div>
                </div>

                <!-- Results -->
                <div id="resultSection" class="hidden glass-panel rounded-2xl p-6 border-l-4 border-pink-500 relative overflow-hidden">
                    <!-- Background Glow -->
                    <div class="absolute -right-20 -top-20 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl pointer-events-none"></div>

                    <div class="flex justify-between items-start mb-6 relative z-10">
                        <h3 class="text-xl font-bold text-pink-400">Analysis Results</h3>
                        <div class="text-right">
                            <div class="text-xs text-slate-500 uppercase">Execution Time</div>
                            <div class="font-mono text-slate-300" id="execTime">0.00ms</div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 relative z-10">
                        <div class="bg-slate-800/80 p-4 rounded-lg border border-slate-700">
                            <div class="text-slate-400 text-xs uppercase mb-1">Root ($X_{root}$)</div>
                            <div id="rootDisplay" class="text-2xl font-mono text-white font-bold tracking-tight">--</div>
                        </div>
                        <div class="bg-slate-800/80 p-4 rounded-lg border border-slate-700">
                            <div class="text-slate-400 text-xs uppercase mb-1">Relative Error ($\epsilon_a$)</div>
                            <div id="errorDisplay" class="text-xl font-mono text-yellow-400">--</div>
                        </div>
                        <div class="bg-slate-800/80 p-4 rounded-lg border border-slate-700">
                            <div class="text-slate-400 text-xs uppercase mb-1">Iterations</div>
                            <div id="iterDisplay" class="text-xl font-mono text-cyan-400">--</div>
                        </div>
                    </div>

                    <!-- Steps Table -->
                    <div class="mt-6 border-t border-slate-700/50 pt-4">
                        <button onclick="toggleSteps()" class="w-full text-center text-sm text-slate-400 hover:text-white transition flex items-center justify-center gap-2 group">
                            <span>Show Detailed Steps</span>
                            <span class="group-hover:translate-y-1 transition-transform">â–¼</span>
                        </button>
                        <div id="stepsContainer" class="hidden mt-4 overflow-x-auto rounded-lg border border-slate-700">
                            <table class="w-full text-sm text-left text-slate-300">
                                <thead class="text-xs text-slate-400 uppercase bg-slate-900/80">
                                    <tr>
                                        <th class="px-6 py-3">Iter</th>
                                        <th class="px-6 py-3 border-l border-slate-700">X<sub>old</sub></th>
                                        <th class="px-6 py-3 border-l border-slate-700">X<sub>new</sub></th>
                                        <th class="px-6 py-3 border-l border-slate-700">Error %</th>
                                    </tr>
                                </thead>
                                <tbody id="stepsTableBody" class="bg-slate-800/50 divide-y divide-slate-700">
                                    <!-- Rows go here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="roots.js"></script>
</body>
</html>